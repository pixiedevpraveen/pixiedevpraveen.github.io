var router=new Router({mode:'history',page404:function(path){console.log('"/'+path+'" Page not found');}});async function setMainData(url){let title;document.getElementById("startLoading").click();await axios.get(url,{params:{type:"api"}}).then((response)=>{document.getElementById('main').innerHTML=response.data.html;document.title=response.data.data.meta.title+" | "+document.title.split(" | ").slice(-1)[0];document.getElementsByTagName("meta")["description"].content=response.data.data.meta.description;document.getElementsByTagName("meta")["keywords"].content=response.data.data.meta.keywords;title=response.data.data.meta.title;}).catch((err)=>console.log(error));document.getElementById("saveState").click();document.getElementById("stopLoading").click();return title;};function closeNavbar(){var toggler=document.querySelector("#navbar-toggle-more");if(toggler.innerText=='Close');toggler.click();};function focusMain(){window.scroll({top:0,left:0,behavior:'smooth'});};function addHistory(title,url){let data=[];if(localStorage.blogHistory&&localStorage.blogHistory!="");data=JSON.parse(localStorage.blogHistory);if(data&&data.length>4){data=data.slice(-4);};data.push({"title":title,"url":url});let s=new Set();data.forEach(element=>{s.add(JSON.stringify(element));});data=[];s.forEach(element=>{data.push(JSON.parse(element));});localStorage.blogHistory=JSON.stringify(data);document.querySelector("#updateHistory").click()};let routesPath=['','/blog/','/about/','/portfolio/'];routesPath.forEach(path=>{router.add(path,function(){setMainData(path);});});router.add('/blog/(:any)/',function(slug){slug='/blog/'+slug+'/';setMainData(slug);setTimeout(()=>{addHistory(document.getElementById("post-title").innerText,slug);console.log('router');},1000);});document.querySelector("#prApp").addEventListener('click',(e)=>{if(!(e.target.classList.contains("router-link")||e.target.parentNode.classList.contains("router-link")))return;e.preventDefault();var path='';if(e.target.classList.contains("router-link"));path=e.target.attributes['href'].value;else;path=e.target.parentNode.attributes['href'].value;router.navigateTo(path);closeNavbar();focusMain();});router.addUriListener();function init(){let homeLink=document.querySelectorAll("a.home-link");homeLink.forEach(e=>{let url=window.location.host;e.href=url;e.innerText=url;});let path=window.location.pathname;if(path.length>"/blog/".length&&path.startsWith("/blog/")){setTimeout(()=>{addHistory(document.getElementById("post-title").innerText,path);},1000);}};init();